C51 COMPILER V9.60.0.0   SMG                                                               04/07/2023 18:48:53 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE SMG
OBJECT MODULE PLACED IN .\Objects\smg.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE App\smg\smg.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\App\pcf8591;.\Public;.\A
                    -pp\smg;.\App\iic) DEBUG OBJECTEXTEND PRINT(.\Listings\smg.lst) OBJECT(.\Objects\smg.obj)

line level    source

   1          /*
   2           * @Author: Fenobi 13667739122@qq.com
   3           * @Date: 2023-03-17 17:16:57
   4           * @LastEditors: Fenobi 13667739122@qq.com
   5           * @LastEditTime: 2023-03-17 20:31:14
   6           * @FilePath: \ç¬¬å…«å±Š\App\smg\smg.c
   7           */
   8          #include "smg.h" //æ•°ç ç®¡å‡½æ•°å¤´æ–‡ä»¶
   9          
  10          //*********************************0    1    2    3    4    5    6    7    8    9    .    - c
  11          unsigned char Display_Digital[13] = {0xc0, 0xf9, 0xa4, 0xb0, 0x99, 0x92, 0x82, 0xf8, 0x80, 0x90, 0x7f, 0xb
             -f, 0xc6};
  12          unsigned char Display_WEI[9] = {0, 1, 2, 4, 8, 16, 32, 64, 128};
  13          
  14          // 74hc138èŠ¯ç‰‡é©±åŠ¨å‡½æ•°
  15          // ä¾‹å¦‚ï¼šHC138_Y(2);  åˆ™74hc138èŠ¯ç‰‡çš„Y2å¼•è„šè¾“å‡ºä½ç”µå¹³ï¼Œåˆ™å°†æˆ–éé—¨Y2Cå¯¹åº”çš„74hc573èŠ
             -¯ç‰‡è¾“å‡ºæ•°æ®é”å­˜ã€‚
  16          void HC138_Y(u8 Yx)
  17          {
  18   1              switch (Yx)
  19   1              {
  20   2              case 0:
  21   2                      HC138_C = 0;
  22   2                      HC138_B = 0;
  23   2                      HC138_A = 0;
  24   2                      break;
  25   2              case 1:
  26   2                      HC138_C = 0;
  27   2                      HC138_B = 0;
  28   2                      HC138_A = 1;
  29   2                      break;
  30   2              case 2:
  31   2                      HC138_C = 0;
  32   2                      HC138_B = 1;
  33   2                      HC138_A = 0;
  34   2                      break;
  35   2              case 3:
  36   2                      HC138_C = 0;
  37   2                      HC138_B = 1;
  38   2                      HC138_A = 1;
  39   2                      break;
  40   2              case 4:
  41   2                      HC138_C = 1;
  42   2                      HC138_B = 0;
  43   2                      HC138_A = 0;
  44   2                      break;
  45   2              case 5:
  46   2                      HC138_C = 1;
  47   2                      HC138_B = 0;
  48   2                      HC138_A = 1;
  49   2                      break;
  50   2              case 6:
  51   2                      HC138_C = 1;
  52   2                      HC138_B = 1;
C51 COMPILER V9.60.0.0   SMG                                                               04/07/2023 18:48:53 PAGE 2   

  53   2                      HC138_A = 0;
  54   2                      break;
  55   2              case 7:
  56   2                      HC138_C = 1;
  57   2                      HC138_B = 1;
  58   2                      HC138_A = 1;
  59   2                      break;
  60   2              }
  61   1      }
  62          
  63          // æ•°ç ç®¡æ˜¾ç¤ºæ•°å­—å‡½æ•°(æ®µé€‰)
  64          // ä¾‹å¦‚ï¼š SMG_Display(2,0);  åˆ™æ•°ç ç®¡æ˜¾ç¤ºæ•°å­—2  æ²¡æœ‰å°æ•°ç‚¹
  65          // ä¾‹å¦‚ï¼š SMG_Display(2,1);  åˆ™æ•°ç ç®¡æ˜¾ç¤ºæ•°å­—2. æœ‰å°æ•°ç‚¹
  66          void SMG_Display_Digital(u8 num, u8 point)
  67          {
  68   1              switch (point)
  69   1              {
  70   2              case 0:
  71   2                      SMG_GPIO = Display_Digital[num];
  72   2                      break;
  73   2              case 1:
  74   2                      SMG_GPIO = Display_Digital[num] & 0x7f;
  75   2                      break;
  76   2              }
  77   1      }
  78          
  79          // é€‰æ‹©ç¬¬å‡ ä½æ•°ç ç®¡æ˜¾ç¤ºå‡½æ•°(ä½é€‰)
  80          // ä¾‹å¦‚ï¼š WEI(2); åˆ™å…«ä¸ªæ•°ç ç®¡ä»å·¦åˆ°å³ç¬¬2ä¸ªæ•°ç ç®¡å¯ä»¥æ˜¾ç¤ºã€‚
  81          void SMG_Display_Wei(u8 wei)
  82          {
  83   1              SMG_GPIO = Display_WEI[wei];
  84   1      }
  85          
  86          /*****************************************
  87                                                  å…«ä½æ•°ç ç®¡æ˜¾ç¤ºé©±åŠ¨æ€è·¯
  88          
  89          ** æ•°ç ç®¡æ˜¾ç¤ºä¸€ä½
  90          **      1.æ‰“å¼€å¯¹åº”74hc57è·Ÿéšè¾“å‡ºY6Cï¼Œè¾“å…¥ä½é€‰ï¼ˆé€‰æ‹©ç¬¬å‡ ä½æ•°ç ç®¡æ˜¾ç¤ºæ•°å­—ï¼‰ã€‚
  91          **      2.æ‰“å¼€å¯¹åº”74hc57è·Ÿéšè¾“å‡ºY7Cï¼Œè¾“å…¥å¯¹åº”æ–­ç (å†™å…¥è¦æ˜¾ç¤ºçš„æ•°å­—)ã€‚
  92          **      3.å»¶æ—¶ä¸€ä¼šå„¿ï¼ˆæ¯”å¦‚ï¼š2msï¼‰ï¼Œè¿™é‡Œè¦é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å»¶æ—¶æ—¶é—´ï¼ˆæ—¶é—´å¤§äº†æ˜¾ç¤ºä¼
             -šé—ªï¼Œå¤ªå°äº†æ˜¾ç¤ºå¤ªæš—ï¼‰
  93          **
  94          **      è¦æ˜¾ç¤ºå¤šä½ä¾æ¬¡å¾ªç¯1~4æ­¥å³å¯
  95          *********************************************/
  96          
  97          // æ•°ç ç®¡æŒ‡å®šä¸€ä½æ˜¾ç¤ºä¸€ä½æ•°å­—å‡½æ•°
  98          // ä¾‹å¦‚ï¼šDisplay_1_WEI(2,3,0);  è¡¨ç¤ºç¬¬äºŒä½æ•°ç ç®¡æ˜¾ç¤º3 ï¼Œæ•°å­—3ä¸‹é¢æ²¡æœ‰æ˜¾ç¤ºå°æ•°ç‚¹
  99          // ä¾‹å¦‚ï¼šDisplay_1_WEI(2,3,1);  è¡¨ç¤ºç¬¬äºŒä½æ•°ç ç®¡æ˜¾ç¤º3. ï¼Œæ•°å­—3ä¸‹é¢æœ‰æ˜¾ç¤ºå°æ•°ç‚¹
 100          void Display_1_WEI(u8 wei, u8 num, u8 point)
 101          {
 102   1              HC138_Y(6); // 1
 103   1              SMG_Display_Wei(wei);
 104   1      
 105   1              HC138_Y(7); // 2
 106   1              SMG_Display_Digital(num, point);
 107   1      
 108   1              Delay_ms(2); // 3
 109   1      }
 110          
 111          // æ•°ç ç®¡æŒ‡å®šä»ç¬¬å‡ ä½æ˜¾ç¤ºä¸¤ä½æ•´æ•°å‡½æ•°
 112          void Display_2_WEI(u8 wei, u8 num)
 113          {
C51 COMPILER V9.60.0.0   SMG                                                               04/07/2023 18:48:53 PAGE 3   

 114   1              Display_1_WEI(wei, num % 100 / 10, 0); // æ˜¾ç¤ºåä½
 115   1              Display_1_WEI(wei + 1, num % 10, 0);   // æ˜¾ç¤ºä¸ªä½
 116   1      }
 117          
 118          // æ•°ç ç®¡æŒ‡å®šä»ç¬¬å‡ ä½æ˜¾ç¤ºå››ä½æ•´æ•°å‡½æ•°
 119          void Display_4_WEI(u8 wei, u16 num)
 120          {
 121   1              Display_1_WEI(wei, num / 1000, 0);                       // æ˜¾ç¤ºåƒä½
 122   1              Display_1_WEI(wei + 1, num % 1000 / 100, 0); // æ˜¾ç¤ºç™¾ä½
 123   1              Display_1_WEI(wei + 2, num % 100 / 10, 0);       // æ˜¾ç¤ºåä½
 124   1              Display_1_WEI(wei + 3, num % 10, 0);             // æ˜¾ç¤ºä¸ªä½
 125   1      }
 126          
 127          // æ˜¾ç¤ºå°äº10çš„ä¸¤ä½å°æ•°å‡½æ•°
 128          void Display_1_2Wei_XS(u8 wei, float num)
 129          {
 130   1              num = num * 100;                                                                // å°†å°æ•°æ‰©å¤§100å€
 131   1              Display_1_WEI(wei, (int)num % 1000 / 100, 1);   // æ˜¾ç¤ºç™¾ä½
 132   1              Display_1_WEI(wei + 1, (int)num % 100 / 10, 0); // æ˜¾ç¤ºåä½
 133   1              Display_1_WEI(wei + 2, (int)num % 10, 0);               // æ˜¾ç¤ºä¸ªä½
 134   1      }
 135          
 136          // æ˜¾ç¤ºå°äº100çš„ä¸¤ä½å°æ•°å‡½æ•°
 137          void Display_2_2Wei_XS(u8 wei, float num)
 138          {
 139   1              num = num * 100;                                                                  // å°†å°æ•°æ‰©å¤§100å€
 140   1              Display_1_WEI(wei, num / 1000, 0);                                // æ˜¾ç¤ºåƒä½
 141   1              Display_1_WEI(wei + 1, (int)num % 1000 / 100, 1); // æ˜¾ç¤ºç™¾ä½
 142   1              Display_1_WEI(wei + 2, (int)num % 100 / 10, 0);   // æ˜¾ç¤ºåä½
 143   1              Display_1_WEI(wei + 3, (int)num % 10, 0);                 // æ˜¾ç¤ºä¸ªä½
 144   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    602    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     22      15
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
