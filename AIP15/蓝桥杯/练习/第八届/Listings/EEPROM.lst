C51 COMPILER V9.60.0.0   EEPROM                                                            03/18/2023 15:19:24 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE EEPROM
OBJECT MODULE PLACED IN .\Objects\EEPROM.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE App\EEPROM\EEPROM.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\App\ds18b20;.\App\
                    -ds1302;.\App\EEPROM;.\App\iic;.\App\key;.\App\smg;.\Public;.\App\BEED_JDQ) DEBUG OBJECTEXTEND PRINT(.\Listings\EEPROM.ls
                    -t) OBJECT(.\Objects\EEPROM.obj)

line level    source

   1          /*
   2           * @Author: Fenobi 13667739122@qq.com
   3           * @Date: 2023-03-17 17:17:12
   4           * @LastEditors: Fenobi 13667739122@qq.com
   5           * @LastEditTime: 2023-03-18 12:08:31
   6           * @FilePath: \ç¬¬å…«å±Š\App\EEPROM\EEPROM.c
   7           */
   8          #include "EEPROM.h"
   9          /******************
  10          **1.MCUå…ˆå‘é€ä¸€ä¸ªå¼€å§‹ä¿¡å·(START)å¯åŠ¨æ€»çº¿
  11          **2.æ¥ç€è·Ÿä¸Šé¦–å­—èŠ‚ï¼Œå‘é€å™¨ä»¶å†™æ“ä½œåœ°å€(DEVICE ADDRESS)+å†™æ•°æ®(0xA0)
  12          **3.ç­‰å¾…åº”ç­”ä¿¡å·(ACK)
  13          **4.å‘é€æ•°æ®çš„å­˜å‚¨åœ°å€ã€‚24C02ä¸€å…±æœ‰256ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ï¼Œåœ°å€ä»0x00~0xFFï¼Œæƒ³æŠŠæ
             -•°æ®å­˜å‚¨>åœ¨å“ªä¸ªä½ç½®ï¼Œæ­¤åˆ»å†™çš„å°±æ˜¯å“ªä¸ªåœ°å€ã€‚
  14          **5.å‘é€è¦å­˜å‚¨çš„æ•°æ®ç¬¬ä¸€å­—èŠ‚ã€ç¬¬äºŒå­—èŠ‚ã€â€¦æ³¨æ„åœ¨å†™æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼ŒE2PROMæ¯ä¸ª
             -å­—èŠ‚éƒ½ä¼š>å›åº”ä¸€ä¸ªâ€œåº”ç­”ä½0â€ï¼Œè€å‘Šè¯‰æˆ‘ä»¬å†™E2PROMæ•°æ®æˆåŠŸï¼Œå¦‚æœæ²¡æœ‰å›åº”ç­”ä½ï¼Œè¯´æ˜å†™å
             -…¥ä¸æˆåŠŸã€‚
  15          **6.å‘é€ç»“æŸä¿¡å·ï¼ˆSTOPï¼‰åœæ­¢æ€»çº¿
  16          *************************************************************************************************
  17          **è¯´æ˜ï¼šAT24C02 EEPROMèŠ¯ç‰‡ä¸€å…±æœ‰2Kbitç©ºé—´ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§å¯ä»¥å‚¨å­˜256ä¸ªå­—èŠ‚æ•°æ®ï¼Œå‚¨å
             -­˜åœ°å€ä¸º0x00~0xff;
  18          *******************/
  19          void Write_EEPROM(unsigned char addr, unsigned char Data)
  20          {
  21   1              unsigned char i = 0, t = 10;
  22   1              IIC_Start();
  23   1              IIC_SendByte(0xA0);
  24   1              IIC_WaitAck();
  25   1              IIC_SendByte(addr);
  26   1              IIC_WaitAck();
  27   1              IIC_SendByte(Data);
  28   1              IIC_WaitAck();
  29   1              IIC_Stop();
  30   1      
  31   1              //      operate_delay(10);
  32   1              while (t--)
  33   1              {
  34   2                      for (i = 0; i < 112; i++)
  35   2                              ;
  36   2              }
  37   1      }
  38          
  39          unsigned char Read_EEPROM(unsigned char addr)
  40          {
  41   1              unsigned char Data;
  42   1      
  43   1              IIC_Start();
  44   1              IIC_SendByte(0xA0);
  45   1              IIC_WaitAck();
  46   1              IIC_SendByte(addr);
  47   1              IIC_WaitAck();
  48   1              IIC_Start();
  49   1              IIC_SendByte(0xA1);
C51 COMPILER V9.60.0.0   EEPROM                                                            03/18/2023 15:19:24 PAGE 2   

  50   1              IIC_WaitAck();
  51   1              Data = IIC_RecByte();
  52   1              IIC_SendAck(0);
  53   1              IIC_Stop();
  54   1      
  55   1              return Data;
  56   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    114    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
