C51 COMPILER V9.59.0.0   CX20106A                                                          11/30/2022 20:05:57 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE CX20106A
OBJECT MODULE PLACED IN .\Objects\CX20106A.obj
COMPILER INVOKED BY: D:\MDK5\C51\BIN\C51.EXE CX20106A.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\CX2
                    -0106A.lst) TABS(2) OBJECT(.\Objects\CX20106A.obj)

line level    source

   1          #include "CX20106A.h"
   2          
   3          //超声波模块初始化函数
   4          void US_init(void)
   5          {
   6   1        AUXR |= 0x80;   //定时器时钟1T模式
   7   1        TMOD &= 0xF0;   //c设置定时器模式
   8   1        TL0 = 0x00;   
   9   1        TH0 = 0x00;   
  10   1        TF0 = 0;    
  11   1      }
  12          
  13          //软件延时函数
  14          void Delay10us()    //@12.000MHz
  15          {
  16   1        unsigned char i;
  17   1        _nop_();
  18   1        _nop_();
  19   1        i = 27;
  20   1        while (--i);
  21   1      }
  22          
  23          //超声波模块获得距离函数（函数还回距离值 单位：cm）
  24          u16 Get_distance(void)    //12M
  25          {
  26   1        u8 i = 8;
  27   1        u16 distance;
  28   1        while(i--)
  29   1        {
  30   2          P10 = 1;
  31   2          Delay10us();      //延时时间有待探究
  32   2          P10 = 0;
  33   2          Delay10us();
  34   2        }
  35   1        
  36   1        TL0 = 0;    
  37   1        TH0 = 0;
  38   1        TR0 = 1;
  39   1        while(P11 && (TF0 == 0));
  40   1        TR0 = 0;
  41   1        
  42   1        if(TF0)
  43   1        {
  44   2          TF0 = 0; distance = 99;
  45   2        }
  46   1        else
  47   1        {
  48   2          distance = ((TH0<<8)|(TL0))*0.0014167;    //得到<100cm的测量距离
  49   2        }
  50   1          return distance;           
  51   1      }
  52          
  53          //――――――――――――――――
  54          //版权声明：本文为CSDN博主「Dream_言十」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声
C51 COMPILER V9.59.0.0   CX20106A                                                          11/30/2022 20:05:57 PAGE 2   

             -明。
  55          //原文链接：https://blog.csdn.net/weixin_43487914/article/details/107498385


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    106    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
